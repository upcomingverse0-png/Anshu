const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const question = document.getElementById("question");
const music = document.getElementById("loveMusic");

// Name from URL
const params = new URLSearchParams(window.location.search);
const name = params.get("name");

if (name) {
  question.innerText = `${name}, will you be my Valentine? ‚ù§Ô∏è`;
}

// NO button ‚Äì cute response
noBtn.addEventListener("click", () => {
  question.innerHTML =
    "ü•∫ Aise NO mat bolo na‚Ä¶<br><br>tum meri favourite ho ‚ù§Ô∏è";
});

// YES button ‚Äì full magic
yesBtn.addEventListener("click", () => {
  // music
  music.play().catch(() => {});

  // night + reel mode
  document.body.classList.add("night", "reel");

  // hide buttons
  document.querySelector(".buttons").style.display = "none";

  // confetti + hearts
  launchConfetti();
  popHearts();

  const messages = [
    "ü•∞ Hehe‚Ä¶ mujhe pata tha tum hamesha YES hi kahogi ‚ù§Ô∏è",
    "üíû Tum sirf meri Valentine nahi ho‚Ä¶",
    "üåç Tum meri zindagi ka sabse khoobsurat hissa ho",
    "ü•π Tumhare saath har din special lagta hai",
    "‚ù§Ô∏è I‚Äôm really lucky to have you",
    "üåπ Happy Valentine, my love üåπ"
  ];

  let i = 0;
  question.innerHTML = messages[i];

  const interval = setInterval(() => {
    i++;
    if (i < messages.length) {
      question.innerHTML = messages[i];
    } else {
      clearInterval(interval);
    }
  }, 2200);
});

// helpers
function launchConfetti() {
  const colors = ["#ff4d6d", "#ffd166", "#06d6a0", "#4cc9f0"];
  for (let i = 0; i < 40; i++) {
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.left = Math.random() * 100 + "vw";
    c.style.background = colors[Math.floor(Math.random() * colors.length)];
    c.style.animationDuration = 2 + Math.random() * 2 + "s";
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 3500);
  }
}

function popHearts() {
  for (let i = 0; i < 8; i++) {
    const h = document.createElement("div");
    h.className = "heart";
    h.innerText = "üíñ";
    h.style.left = 20 + Math.random() * 60 + "vw";
    h.style.bottom = "120px";
    document.body.appendChild(h);
    setTimeout(() => h.remove(), 3000);
  }
  }
  // PASSWORD (change it to something only she knows)
function unlock(){
  const pass = document.getElementById("pwd").value;
  if(pass === "you"){     // ‚Üê password change kar sakte ho
    document.getElementById("lock").style.display="none";
  } else {
    document.getElementById("err").style.display="block";
  }
}

// Screenshot (mobile-safe)
const shotBtn = document.createElement("button");
shotBtn.id = "shotBtn";
shotBtn.innerText = "üì∏ Save Memory";
document.body.appendChild(shotBtn);
shotBtn.onclick = () => window.print();

// After YES flow ends ‚Üí Forever ending + show screenshot btn
function showForever(){
  question.classList.add("forever");
  question.innerHTML = "üíç Forever Together<br><br>Always you. Always us. ‚ù§Ô∏è";
  document.getElementById("shotBtn").style.display="block";
    }
